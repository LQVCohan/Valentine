<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valentine 14/02 üíò</title>
  <style>
    :root{
      --bg1:#fff0f6;
      --bg2:#ffe3ed;
      --card:#ffffffcc;
      --text:#1f2937;
      --muted:#6b7280;
      --pink:#ff4d8d;
      --pink2:#ff86b4;
      --shadow: 0 18px 55px rgba(255, 77, 141, .22);
      --shadow2: 0 14px 40px rgba(31, 41, 55, .12);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 30% 0%, #ffd1e4 0%, transparent 60%),
        radial-gradient(900px 500px at 70% 15%, #ffe7f1 0%, transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    /* floating hearts background */
    .hearts{position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:0;}
    .heart{
      position:absolute;
      width:14px;height:14px;
      transform:rotate(45deg);
      opacity:.22;
      animation: floatUp linear infinite;
      filter: blur(.15px);
    }
    .heart:before,.heart:after{
      content:"";
      position:absolute;
      width:14px;height:14px;
      background:var(--pink);
      border-radius:50%;
    }
    .heart{background:var(--pink)}
    .heart:before{left:-7px; top:0}
    .heart:after{left:0; top:-7px}
    @keyframes floatUp{
      from{transform: translateY(110vh) rotate(45deg); }
      to{transform: translateY(-20vh) rotate(45deg); }
    }

    .wrap{
      position:relative;
      z-index:1;
      max-width:980px;
      margin:0 auto;
      padding:24px 16px 48px;
    }

    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:12px 14px;
      border-radius:999px;
      background:var(--card);
      box-shadow: var(--shadow2);
      backdrop-filter: blur(10px);
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:800;
      letter-spacing:.2px;
    }
    .badge{
      display:inline-flex; align-items:center; justify-content:center;
      width:34px; height:34px;
      border-radius:999px;
      background:linear-gradient(135deg, var(--pink), var(--pink2));
      box-shadow: 0 12px 26px rgba(255,77,141,.25);
      color:white;
      font-size:18px;
    }
    .tiny{color:var(--muted); font-weight:600; font-size:13px}
    .actions{display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end}

    .btn{
      border:0;
      padding:10px 14px;
      border-radius:999px;
      cursor:pointer;
      font-weight:750;
      transition: transform .08s ease, filter .12s ease;
      user-select:none;
      display:inline-flex; align-items:center; gap:8px;
    }
    .btn:hover{filter:brightness(1.02)}
    .btn:active{transform: translateY(1px) scale(.99)}
    .btn.primary{
      color:white;
      background:linear-gradient(135deg, var(--pink), var(--pink2));
      box-shadow: 0 14px 30px rgba(255,77,141,.26);
    }
    .btn.ghost{
      background:#fff;
      color:var(--text);
      box-shadow: 0 10px 26px rgba(31,41,55,.10);
    }

    .hero{
      margin-top:18px;
      border-radius: var(--radius);
      background: linear-gradient(135deg, #fff, #fff6fb);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:0;
    }
    @media (max-width: 820px){
      .hero{grid-template-columns:1fr}
    }
    .hero .left{
      padding:22px 22px 18px;
    }
    .kicker{
      display:inline-flex; gap:8px; align-items:center;
      padding:6px 12px;
      background:#ffe1ef;
      border-radius:999px;
      font-weight:800;
      color:#9a1f52;
      font-size:13px;
    }
    h1{
      margin:12px 0 8px;
      font-size: clamp(28px, 4vw, 44px);
      line-height:1.05;
      letter-spacing:-.5px;
    }
    .sub{
      color:var(--muted);
      font-weight:600;
      font-size:15px;
      line-height:1.5;
      margin:0 0 14px;
    }
    .chips{
      display:flex; gap:8px; flex-wrap:wrap;
      margin:14px 0 0;
    }
    .chip{
      background:#fff;
      border:1px solid #ffd0e2;
      padding:7px 10px;
      border-radius:999px;
      font-weight:750;
      font-size:13px;
      color:#8a1747;
    }
    .hero .right{
      position:relative;
      min-height:280px;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
      background:
        radial-gradient(240px 240px at 40% 35%, rgba(255,77,141,.20) 0%, transparent 60%),
        radial-gradient(220px 220px at 70% 70%, rgba(255,134,180,.22) 0%, transparent 62%),
        linear-gradient(135deg, #fff0f7, #fff);
    }
    .bigHeart{
      width:min(290px, 75vw);
      aspect-ratio:1/1;
      position:relative;
      filter: drop-shadow(0 24px 48px rgba(255,77,141,.28));
      animation: pulse 1.65s ease-in-out infinite;
    }
    .bigHeart:before,.bigHeart:after{
      content:"";
      position:absolute;
      width:50%; height:50%;
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      border-radius:50%;
      top:20%; left:25%;
    }
    .bigHeart:after{left:0; top:0; transform: translate(25%, 20%)}
    .bigHeart .sq{
      position:absolute;
      inset:0;
      margin:auto;
      width:62%; height:62%;
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      transform: rotate(45deg);
      border-radius:16px;
      top:18%;
    }
    @keyframes pulse{
      0%,100%{transform:scale(1)}
      50%{transform:scale(1.04)}
    }
    .heroNote{
      position:absolute;
      bottom:14px; left:14px; right:14px;
      background: rgba(255,255,255,.74);
      border: 1px solid rgba(255,77,141,.22);
      border-radius: 14px;
      padding:10px 12px;
      font-weight:700;
      color:#8a1747;
      box-shadow: 0 10px 26px rgba(31,41,55,.08);
      backdrop-filter: blur(10px);
    }

    .grid{
      margin-top:18px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:14px;
    }
    @media (max-width: 820px){.grid{grid-template-columns:1fr}}
    .card{
      background: var(--card);
      border:1px solid rgba(255,77,141,.14);
      border-radius: var(--radius);
      padding:16px;
      box-shadow: var(--shadow2);
      backdrop-filter: blur(10px);
    }
    .card h2{
      margin:0 0 6px;
      font-size:18px;
      letter-spacing:-.2px;
    }
    .card p{margin:0; color:var(--muted); font-weight:600; line-height:1.5; font-size:14px}

    /* Gallery */
    .gallery{
      margin-top:10px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
    }
    @media (max-width: 520px){.gallery{grid-template-columns: repeat(2, 1fr)}}
    .shot{
      width:100%;
      aspect-ratio:1/1;
      object-fit:cover;
      border-radius: 16px;
      border:1px solid rgba(0,0,0,.06);
      box-shadow: 0 12px 26px rgba(31,41,55,.10);
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease;
      background:#fff;
    }
    .shot:hover{transform: translateY(-2px) scale(1.01); filter:saturate(1.03)}
    .shot:active{transform: translateY(0) scale(.995)}

    /* Candy jar */
    .jarWrap{
      display:flex; gap:14px; align-items:center; flex-wrap:wrap;
      margin-top:10px;
    }
    .jar{
      width:150px; height:190px;
      position:relative;
    }
    .jar svg{width:100%; height:100%}
    .candyLine{
      display:flex; flex-direction:column; gap:10px;
      flex: 1;
      min-width: 240px;
    }
    .candyOut{
      background:#fff;
      border:1px dashed rgba(255,77,141,.35);
      border-radius: 16px;
      padding:12px 12px;
      font-weight:800;
      color:#8a1747;
      min-height:56px;
      display:flex; align-items:center;
    }
    .shake{
      animation: shake .4s ease-in-out 1;
    }
    @keyframes shake{
      0%,100%{transform:rotate(0deg)}
      25%{transform:rotate(-3deg)}
      50%{transform:rotate(3deg)}
      75%{transform:rotate(-2deg)}
    }

    /* Mini game */
    .game{
      margin-top:10px;
      background:#fff;
      border:1px solid rgba(255,77,141,.18);
      border-radius: 16px;
      padding:12px;
    }
    .gameTop{
      display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap;
      margin-bottom:8px;
    }
    .score{
      font-weight:900;
      color:#8a1747;
      background:#ffe7f1;
      padding:8px 12px;
      border-radius:999px;
    }
    .playfield{
      position:relative;
      height:240px;
      border-radius:14px;
      overflow:hidden;
      background: radial-gradient(240px 120px at 30% 30%, #ffe5f0, #fff);
      border: 1px solid rgba(0,0,0,.06);
    }
    .tapHeart{
      position:absolute;
      width:28px; height:28px;
      transform: rotate(45deg);
      cursor:pointer;
      animation: fall linear forwards;
    }
    .tapHeart:before,.tapHeart:after{
      content:"";
      position:absolute;
      width:28px;height:28px;
      background:var(--pink);
      border-radius:50%;
    }
    .tapHeart{background:var(--pink)}
    .tapHeart:before{left:-14px; top:0}
    .tapHeart:after{left:0; top:-14px}
    @keyframes fall{
      from{transform: translateY(-40px) rotate(45deg); opacity:.95}
      to{transform: translateY(280px) rotate(45deg); opacity:.15}
    }

    /* Modal */
    .modal{position:fixed; inset:0; display:none; z-index:50;}
    .modal.show{display:block}
    .backdrop{
      position:absolute; inset:0;
      background: rgba(17,24,39,.48);
      backdrop-filter: blur(6px);
    }
    .dialog{
      position:relative;
      width:min(520px, calc(100vw - 26px));
      margin: min(11vh, 90px) auto 0;
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(255,77,141,.18);
      border-radius: 22px;
      box-shadow: 0 35px 90px rgba(17,24,39,.25);
      padding:16px 16px 14px;
      animation: pop .14s ease-out;
    }
    @keyframes pop{from{transform:translateY(6px) scale(.99); opacity:.0} to{transform:translateY(0) scale(1); opacity:1}}
    .dialogTop{
      display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
    }
    .dialog h3{
      margin:6px 0 6px;
      font-size:18px;
      letter-spacing:-.2px;
    }
    .close{
      border:0;
      width:38px; height:38px;
      border-radius:999px;
      cursor:pointer;
      font-size:18px;
      background:#fff;
      box-shadow: 0 12px 26px rgba(31,41,55,.10);
    }
    .dialog .content{
      color:var(--muted);
      font-weight:650;
      line-height:1.55;
      font-size:14px;
      padding:8px 2px 10px;
    }
    .dialog .content ul{margin:8px 0 0 18px}
    .dialog .foot{
      display:flex; justify-content:flex-end; gap:10px; padding-top:6px;
    }

    /* Confetti */
    .confetti{
      position:fixed; inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:60;
      display:none;
    }
    .confetti.show{display:block}
    .piece{
      position:absolute;
      width:10px; height:14px;
      opacity:.9;
      transform: rotate(10deg);
      animation: confettiFall linear forwards;
    }
    @keyframes confettiFall{
      from{transform: translateY(-20px) rotate(0deg); opacity:1}
      to{transform: translateY(110vh) rotate(740deg); opacity:.9}
    }
  </style>
</head>
<body>
  <div class="hearts" id="bgHearts" aria-hidden="true"></div>

  <div class="confetti" id="confetti" aria-hidden="true"></div>

  <div class="wrap">
    <header>
      <div class="brand">
        <div class="badge">üíò</div>
        <div>
          <div>Valentine 14/02</div>
          <div class="tiny">G·ª≠i em y√™u ‚Äî t·ª´ <b>anh</b> ‚ù§Ô∏è</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn primary" id="btnSurprise">üéÅ M·ªü qu√†</button>
        <button class="btn ghost" id="btnMusic">üéµ B·∫≠t nh·∫°c</button>
      </div>
    </header>

    <section class="hero" aria-label="L·ªùi ch√∫c">
      <div class="left">
        <div class="kicker">‚ú® M·ªôt chi·∫øc web nh·ªè cho em</div>
        <h1>Ch√∫c em m·ªôt Valentine th·∫≠t ng·ªçt ng√†o üíû</h1>
        <p class="sub">
          Anh l√†m trang n√†y ƒë·ªÉ em v·ª´a xem ·∫£nh, v·ª´a ch∆°i v√†i tr√≤ ‚Äúcute ph√¥ mai que‚Äù,
          v√† quan tr·ªçng nh·∫•t l√†‚Ä¶ ƒë·ªÉ em bi·∫øt r·∫±ng <b>anh th∆∞∆°ng em r·∫•t nhi·ªÅu</b>.
        </p>
        <div class="actions" style="justify-content:flex-start">
          <button class="btn primary" id="btnLoveQuiz">üß† Quiz t√¨nh y√™u</button>
          <button class="btn ghost" id="btnCandy">üç¨ H≈© k·∫πo l·ªùi khen</button>
          <button class="btn ghost" id="btnGame">‚ù§Ô∏è B·∫Øt tim</button>
        </div>
        <div class="chips">
          <span class="chip">#em_l√†_ƒë·∫∑c_bi·ªát</span>
          <span class="chip">#anh_lu√¥n_·ªü_ƒë√¢y</span>
          <span class="chip">#h√¥m_nay_em_xinh</span>
        </div>
      </div>
      <div class="right">
        <div class="bigHeart" aria-hidden="true"><div class="sq"></div></div>
        <div class="heroNote">Tip: b·∫•m ‚ÄúM·ªü qu√†‚Äù ƒë·ªÉ nh·∫≠n b·∫•t ng·ªù nho nh·ªè üòö</div>
      </div>
    </section>

    <section class="grid">
      <div class="card" id="galleryCard">
        <h2>üì∏ Album ‚ÄúEm l√† y√™u th∆∞∆°ng‚Äù</h2>
        <p>6 t·∫•m ·∫£nh ƒë√£ ƒë∆∞·ª£c c·∫Øt g·ªçn (kh√¥ng d√≠nh thanh tr·∫°ng th√°i / ch·ªØ). B·∫•m v√†o ·∫£nh ƒë·ªÉ ph√≥ng to nh√©.</p>
        <div class="gallery" id="gallery">
          <img class="shot" src="·∫¢nh/01.jpg" alt="·∫¢nh 1" data-full="·∫¢nh/01.jpg">
          <img class="shot" src="·∫¢nh/02.jpg" alt="·∫¢nh 2" data-full="·∫¢nh/02.jpg">
          <img class="shot" src="·∫¢nh/03.jpg" alt="·∫¢nh 3" data-full="·∫¢nh/03.jpg">
          <img class="shot" src="·∫¢nh/04.jpg" alt="·∫¢nh 4" data-full="·∫¢nh/04.jpg">
          <img class="shot" src="·∫¢nh/05.jpg" alt="·∫¢nh 5" data-full="·∫¢nh/05.jpg">
          <img class="shot" src="·∫¢nh/06.jpg" alt="·∫¢nh 6" data-full="·∫¢nh/06.jpg">
        </div>
      </div>

      <div class="card" id="candyCard">
        <h2>üç¨ H≈© k·∫πo l·ªùi khen (phi√™n b·∫£n ‚Äútr√¥ng nh∆∞ th·∫≠t‚Äù)</h2>
        <p>B·ªëc 1 vi√™n k·∫πo l√† nh·∫≠n 1 l·ªùi khen. L·∫Øc h≈© l√† k·∫πo ‚Äúr∆°i l·ªôp b·ªôp‚Äù trong tim anh üò≥</p>

        <div class="jarWrap">
          <div class="jar" id="jar">
            <!-- a "real-ish" glass jar in SVG (offline friendly) -->
            <svg viewBox="0 0 200 240" xmlns="http://www.w3.org/2000/svg" aria-label="H≈© k·∫πo">
              <defs>
                <linearGradient id="gGlass" x1="0" x2="0" y1="0" y2="1">
                  <stop offset="0" stop-color="#ffffff" stop-opacity=".85"/>
                  <stop offset=".55" stop-color="#ffffff" stop-opacity=".35"/>
                  <stop offset="1" stop-color="#ffffff" stop-opacity=".75"/>
                </linearGradient>
                <linearGradient id="gLid" x1="0" x2="1">
                  <stop offset="0" stop-color="#ff4d8d"/>
                  <stop offset="1" stop-color="#ff86b4"/>
                </linearGradient>
                <linearGradient id="gShine" x1="0" x2="1">
                  <stop offset="0" stop-color="#fff" stop-opacity=".0"/>
                  <stop offset=".35" stop-color="#fff" stop-opacity=".65"/>
                  <stop offset="1" stop-color="#fff" stop-opacity=".0"/>
                </linearGradient>
              </defs>

              <!-- lid -->
              <rect x="50" y="18" rx="16" ry="16" width="100" height="34" fill="url(#gLid)"/>
              <rect x="58" y="8" rx="18" ry="18" width="84" height="24" fill="url(#gLid)" opacity=".92"/>

              <!-- glass body -->
              <path d="M55 58
                       C50 80, 45 110, 48 160
                       C51 206, 74 222, 100 224
                       C126 222, 149 206, 152 160
                       C155 110, 150 80, 145 58
                       Z"
                    fill="url(#gGlass)" stroke="rgba(255,77,141,.35)" stroke-width="2"/>

              <!-- candies inside -->
              <g opacity=".95">
                <circle cx="78" cy="115" r="12" fill="#ff4d8d"/>
                <circle cx="110" cy="130" r="12" fill="#ff86b4"/>
                <circle cx="92" cy="150" r="12" fill="#ff4d8d"/>
                <circle cx="120" cy="155" r="12" fill="#ffd1e4"/>
                <circle cx="78" cy="170" r="12" fill="#ff86b4"/>
                <circle cx="108" cy="178" r="12" fill="#ff4d8d"/>
              </g>

              <!-- shine -->
              <path d="M78 66 C64 98, 62 130, 64 164 C66 192, 76 208, 84 214"
                    fill="none" stroke="url(#gShine)" stroke-width="10" stroke-linecap="round" opacity=".85"/>

              <!-- base shadow -->
              <ellipse cx="100" cy="232" rx="60" ry="10" fill="rgba(31,41,55,.10)"/>
            </svg>
          </div>

          <div class="candyLine">
            <div class="candyOut" id="candyOut">B·∫•m ‚ÄúB·ªëc k·∫πo‚Äù ƒëi em üòö</div>
            <div class="actions" style="justify-content:flex-start">
              <button class="btn primary" id="btnPickCandy">üç¨ B·ªëc k·∫πo</button>
              <button class="btn ghost" id="btnShakeJar">ü´ô L·∫Øc h≈©</button>
            </div>
          </div>
        </div>
      </div>

      <div class="card" id="quizCard">
        <h2>üß† Quiz t√¨nh y√™u</h2>
        <p>Tr·∫£ l·ªùi nhanh cho vui. Cu·ªëi quiz c√≥ ‚Äúph·∫ßn th∆∞·ªüng‚Äù nha!</p>
        <div class="actions" style="justify-content:flex-start; margin-top:10px">
          <button class="btn primary" id="btnStartQuiz">B·∫Øt ƒë·∫ßu</button>
        </div>
      </div>

      <div class="card" id="gameCard">
        <h2>‚ù§Ô∏è Mini game: B·∫Øt tim</h2>
        <p>B·∫•m v√†o nh·ªØng tr√°i tim r∆°i xu·ªëng ƒë·ªÉ ghi ƒëi·ªÉm. (M·ªói tim = +1 y√™u th∆∞∆°ng)</p>

        <div class="game">
          <div class="gameTop">
            <div class="score" id="score">ƒêi·ªÉm: 0</div>
            <div class="actions" style="justify-content:flex-start">
              <button class="btn primary" id="btnPlay">Ch∆°i</button>
              <button class="btn ghost" id="btnStop">D·ª´ng</button>
            </div>
          </div>
          <div class="playfield" id="playfield" aria-label="Khu v·ª±c ch∆°i"></div>
        </div>
      </div>
    </section>

    <div class="card" style="margin-top:14px">
      <h2>üíå L·ªùi nh·∫Øn cu·ªëi</h2>
      <p>
        N·∫øu h√¥m nay em m·ªát, bu·ªìn, hay ch·ªâ ƒë∆°n gi·∫£n l√† mu·ªën ƒë∆∞·ª£c √¥m‚Ä¶ c·ª© n√≥i anh nh√©.
        Anh s·∫Ω ch·∫°y t·ªõi (nhanh h∆°n c·∫£ Wi‚ÄëFi nh√† em) üòÜ
      </p>
      <p style="margin-top:10px">
        <b>Happy Valentine!</b> ‚Äî Anh th∆∞∆°ng em üíó
      </p>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="backdrop" id="modalBackdrop"></div>
    <div class="dialog" role="document">
      <div class="dialogTop">
        <h3 id="modalTitle">Modal</h3>
        <button class="close" id="modalClose" aria-label="ƒê√≥ng">‚úï</button>
      </div>
      <div class="content" id="modalBody"></div>
      <div class="foot">
        <button class="btn primary" id="modalOk">OK</button>
      </div>
    </div>
  </div>

  <audio id="bgm" preload="auto" loop>
    <!-- N·∫øu em mu·ªën nh·∫°c, c√≥ th·ªÉ thay file mp3 v√†o c√πng th∆∞ m·ª•c v√† s·ª≠a src -->
  </audio>

  <script>
    // ----------------------------
    // Cute background hearts
    // ----------------------------
    (function spawnBgHearts(){
      const wrap = document.getElementById('bgHearts');
      const n = 18;
      for(let i=0;i<n;i++){
        const h = document.createElement('div');
        h.className = 'heart';
        const left = Math.random()*100;
        const dur = 10 + Math.random()*16;
        const delay = Math.random()*-20;
        const size = 10 + Math.random()*14;
        h.style.left = left + 'vw';
        h.style.animationDuration = dur + 's';
        h.style.animationDelay = delay + 's';
        h.style.width = size + 'px';
        h.style.height = size + 'px';
        wrap.appendChild(h);
      }
    })();

    // ----------------------------
    // Modal helper (replaces alert())
    // ----------------------------
    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modalTitle');
    const modalBody  = document.getElementById('modalBody');
    const modalOk    = document.getElementById('modalOk');
    const modalClose = document.getElementById('modalClose');
    const modalBackdrop = document.getElementById('modalBackdrop');

    function showModal(title, html){
      modalTitle.textContent = title || "Th√¥ng b√°o";
      modalBody.innerHTML = html || "";
      modal.classList.add('show');
      // focus
      setTimeout(()=>modalOk.focus(), 10);
    }
    function hideModal(){
      modal.classList.remove('show');
    }
    modalOk.addEventListener('click', hideModal);
    modalClose.addEventListener('click', hideModal);
    modalBackdrop.addEventListener('click', hideModal);
    window.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape' && modal.classList.contains('show')) hideModal();
    });

    // Surprise button
    document.getElementById('btnSurprise').addEventListener('click', ()=>{
      showModal("üéÅ B·∫•t ng·ªù n√®!", `
        <div style="font-weight:800;color:#8a1747;margin-bottom:6px">B√© iu, em ch√≠nh th·ª©c nh·∫≠n ƒë∆∞·ª£c:</div>
        <ul>
          <li>1 c√°i √¥m th·∫≠t ch·∫∑t</li>
          <li>1 b·ªØa ƒÉn ngon</li>
          <li>V√† 1 ng∆∞·ªùi th∆∞∆°ng em r·∫•t nhi·ªÅu ü•∞</li>
        </ul>
        <div style="margin-top:10px;color:#6b7280;font-weight:650">G·ª£i √Ω: th·ª≠ ‚ÄúH≈© k·∫πo l·ªùi khen‚Äù v·ªõi ‚ÄúQuiz t√¨nh y√™u‚Äù n·ªØa nha!</div>
      `);
      burstConfetti();
    });

    // ----------------------------
    // Gallery (click -> modal)
    // ----------------------------
    document.getElementById('gallery').addEventListener('click', (e)=>{
      const img = e.target.closest('img');
      if(!img) return;
      const src = img.getAttribute('data-full');
      showModal("üì∏ ·∫¢nh c·ªßa em", `<img src="${src}" alt="·∫¢nh" style="width:100%;border-radius:16px;border:1px solid rgba(0,0,0,.06)" />`);
    });

    // ----------------------------
    // Candy jar (compliments)
    // ----------------------------
    const compliments = [
      "H√¥m nay em xinh qu√° tr·ªùi lu√¥n ü´∂",
      "N·ª• c∆∞·ªùi c·ªßa em l√†m anh m·ªÅm tim üò≥",
      "·ªû c·∫°nh em, m·ªçi th·ª© ƒë·ªÅu nh·∫π nh√†ng h∆°n üíó",
      "Em ƒë√°ng y√™u ki·ªÉu‚Ä¶ kh√¥ng ai ƒë·ª° n·ªïi ü•∫",
      "Em l√† ƒëi·ªÅu may m·∫Øn nh·∫•t c·ªßa anh üçÄ",
      "Gi·ªçng em nghe l√† th·∫•y b√¨nh y√™n r·ªìi üòö",
      "Em v·ª´a ƒë·∫πp v·ª´a gi·ªèi, ai m√† kh√¥ng m√™!",
      "Anh th∆∞∆°ng em nhi·ªÅu h∆°n c·∫£ h√¥m qua (m√† h√¥m qua ƒë√£ nhi·ªÅu l·∫Øm r·ªìi) üíû",
      "Em l√† ‚Äúnh√†‚Äù c·ªßa anh, d√π anh ·ªü ƒë√¢u üè°",
      "Em ∆°i, em l√†m anh nh·ªõ em qu√° ü•∞",
    ];
    const candyOut = document.getElementById('candyOut');
    const jar = document.getElementById('jar');

    document.getElementById('btnPickCandy').addEventListener('click', ()=>{
      const msg = compliments[Math.floor(Math.random()*compliments.length)];
      candyOut.textContent = msg;
      burstConfetti(18);
    });

    document.getElementById('btnShakeJar').addEventListener('click', ()=>{
      jar.classList.remove('shake');
      void jar.offsetWidth; // reflow
      jar.classList.add('shake');
      const msg = "L·∫Øc l·∫Øc‚Ä¶ k·∫πo r∆°i ra: " + compliments[Math.floor(Math.random()*compliments.length)];
      candyOut.textContent = msg;
    });

    // shortcut from hero button
    document.getElementById('btnCandy').addEventListener('click', ()=>{
      document.getElementById('candyCard').scrollIntoView({behavior:'smooth', block:'start'});
      setTimeout(()=>showModal("üç¨ H≈© k·∫πo l·ªùi khen", "K√©o xu·ªëng m·ªôt ch√∫t l√† th·∫•y h≈© k·∫πo nha em üòö"), 450);
    });

    // ----------------------------
    // Quiz
    // ----------------------------
    const quiz = [
      { q: "Khi em bu·ªìn, anh n√™n l√†m g√¨ tr∆∞·ªõc?", a: ["√îm em th·∫≠t ch·∫∑t", "Im l·∫∑ng cho em t·ª± x·ª≠", "Ch∆°i game ti·∫øp"], correct: 0 },
      { q: "M√≥n ‚Äúqu√†‚Äù anh mu·ªën t·∫∑ng em nh·∫•t l√†‚Ä¶", a: ["Th·ªùi gian + s·ª± quan t√¢m", "M·ªôt c√°i h·ª©a th·∫≠t ch·∫Øc", "C·∫£ hai (t·∫•t nhi√™n!)"], correct: 2 },
      { q: "Em th√≠ch ki·ªÉu h·∫πn h√≤ n√†o?", a: ["ƒêi ƒÉn ngon", "ƒêi d·∫°o + n√≥i chuy·ªán", "·ªû nh√† xem phim"], correct: 1 },
      { q: "Ai l√† ng∆∞·ªùi ƒë√°ng y√™u nh·∫•t v≈© tr·ª•?", a: ["Em", "Em", "Em"], correct: 0 },
      { q: "Ch·ªçn c√¢u ƒë√∫ng:", a: ["Anh th∆∞∆°ng em", "Anh th∆∞∆°ng em r·∫•t nhi·ªÅu", "Anh th∆∞∆°ng em v√¥ h·∫°n"], correct: 2 },
    ];

    function runQuiz(){
      let idx = 0;
      let score = 0;

      function render(){
        const item = quiz[idx];
        const buttons = item.a.map((txt,i)=>`
          <button class="btn ${i===0?'primary':'ghost'}" data-i="${i}" style="width:100%; justify-content:center">
            ${txt}
          </button>
        `).join('<div style="height:10px"></div>');

        showModal(`üß† Quiz (${idx+1}/${quiz.length})`, `
          <div style="font-weight:900;color:#8a1747">${item.q}</div>
          <div style="height:12px"></div>
          <div style="display:grid; gap:10px">${buttons}</div>
          <div style="margin-top:10px;font-weight:700;color:#6b7280">ƒêi·ªÉm hi·ªán t·∫°i: ${score}</div>
        `);

        // attach handlers after modal content update
        [...modalBody.querySelectorAll('button[data-i]')].forEach(b=>{
          b.addEventListener('click', ()=>{
            const chosen = Number(b.getAttribute('data-i'));
            if(chosen === item.correct) score++;
            idx++;
            if(idx >= quiz.length){
              finish();
            }else{
              render();
            }
          });
        });
      }

      function finish(){
        burstConfetti();
        showModal("üéâ K·∫øt qu·∫£!", `
          <div style="font-weight:900;color:#8a1747">Em ƒë·∫°t ${score}/${quiz.length} ƒëi·ªÉm!</div>
          <div style="margin-top:8px">
            <b>Ph·∫ßn th∆∞·ªüng:</b> 1 c√°i √¥m + 1 n·ª• h√¥n (n·∫øu em cho ph√©p üò≥) + 1 l·ªùi nh·∫Øn:
          </div>
          <div style="margin-top:10px;background:#fff;border:1px solid rgba(255,77,141,.2);border-radius:16px;padding:12px;font-weight:800;color:#8a1747">
            ‚ÄúEm l√† ƒëi·ªÅu anh tr√¢n tr·ªçng nh·∫•t. C·∫£m ∆°n em v√¨ ƒë√£ ·ªü ƒë√¢y.‚Äù üíó
          </div>
        `);
      }

      render();
    }

    document.getElementById('btnStartQuiz').addEventListener('click', runQuiz);
    document.getElementById('btnLoveQuiz').addEventListener('click', ()=>{
      document.getElementById('quizCard').scrollIntoView({behavior:'smooth', block:'start'});
      setTimeout(runQuiz, 450);
    });

    // ----------------------------
    // Mini game: click falling hearts
    // ----------------------------
    const playfield = document.getElementById('playfield');
    const scoreEl = document.getElementById('score');
    let playing = false;
    let score = 0;
    let spawner = null;

    function spawnTapHeart(){
      const h = document.createElement('div');
      h.className = 'tapHeart';
      const x = Math.random()*(playfield.clientWidth - 28);
      const dur = 1.3 + Math.random()*1.4;
      h.style.left = x + 'px';
      h.style.animationDuration = dur + 's';
      h.addEventListener('click', ()=>{
        score++;
        scoreEl.textContent = "ƒêi·ªÉm: " + score;
        h.remove();
      });
      h.addEventListener('animationend', ()=> h.remove());
      playfield.appendChild(h);
    }

    function startGame(){
      if(playing) return;
      playing = true;
      score = 0;
      scoreEl.textContent = "ƒêi·ªÉm: 0";
      spawner = setInterval(spawnTapHeart, 420);
      spawnTapHeart();
      showModal("‚ù§Ô∏è B·∫Øt tim", "B·∫Øt ƒë·∫ßu r·ªìi ƒë√≥! B·∫•m tim li√™n t·ª•c nha em üòÜ");
    }
    function stopGame(){
      playing = false;
      if(spawner) clearInterval(spawner);
      spawner = null;
      // clear field
      [...playfield.querySelectorAll('.tapHeart')].forEach(n=>n.remove());
      showModal("‚úÖ D·ª´ng game", `Em v·ª´a b·∫Øt ƒë∆∞·ª£c <b>${score}</b> tim. Anh c·ªông th√™m <b>${score}</b> l·∫ßn th∆∞∆°ng em n·ªØa üíó`);
      burstConfetti(22);
    }

    document.getElementById('btnPlay').addEventListener('click', startGame);
    document.getElementById('btnStop').addEventListener('click', stopGame);
    document.getElementById('btnGame').addEventListener('click', ()=>{
      document.getElementById('gameCard').scrollIntoView({behavior:'smooth', block:'start'});
      setTimeout(startGame, 450);
    });

    // ----------------------------
    // Music toggle (optional)
    // ----------------------------
    const bgm = document.getElementById('bgm');
    let musicOn = false;
    const btnMusic = document.getElementById('btnMusic');

    btnMusic.addEventListener('click', async ()=>{
      // This is intentionally "optional": user can add a mp3 and set bgm.src.
      if(!bgm.src){
        showModal("üéµ Nh·∫°c n·ªÅn", `
          <div>Trang hi·ªán ch∆∞a c√≥ file nh·∫°c.</div>
          <div style="margin-top:8px">
            N·∫øu em mu·ªën c√≥ nh·∫°c:
            <ul>
              <li>Ch√©p file <b>music.mp3</b> v√†o c√πng th∆∞ m·ª•c v·ªõi <b>valentine.html</b></li>
              <li>M·ªü file v√† s·ª≠a: <code>bgm.src = "music.mp3"</code></li>
            </ul>
          </div>
        `);
        return;
      }

      try{
        if(!musicOn){
          await bgm.play();
          musicOn = true;
          btnMusic.textContent = "‚è∏Ô∏è T·∫Øt nh·∫°c";
        }else{
          bgm.pause();
          musicOn = false;
          btnMusic.textContent = "üéµ B·∫≠t nh·∫°c";
        }
      }catch{
        showModal("‚ö†Ô∏è Kh√¥ng b·∫≠t ƒë∆∞·ª£c nh·∫°c", "Tr√¨nh duy·ªát c√≥ th·ªÉ ch·∫∑n autoplay. Em b·∫•m l·∫°i l·∫ßn n·ªØa nha üòö");
      }
    });

    // ----------------------------
    // Confetti
    // ----------------------------
    function burstConfetti(count=26){
      const layer = document.getElementById('confetti');
      layer.innerHTML = "";
      layer.classList.add('show');

      const colors = ["#ff4d8d","#ff86b4","#ffd1e4","#ffe1ef","#ffb3d2"];
      const W = window.innerWidth;
      const H = window.innerHeight;

      for(let i=0;i<count;i++){
        const p = document.createElement('div');
        p.className = 'piece';
        p.style.left = Math.random()*W + "px";
        p.style.top = (-20 - Math.random()*H*0.2) + "px";
        p.style.background = colors[Math.floor(Math.random()*colors.length)];
        p.style.animationDuration = (2.2 + Math.random()*1.8) + "s";
        p.style.animationDelay = (Math.random()*0.15) + "s";
        p.style.borderRadius = (2 + Math.random()*4) + "px";
        layer.appendChild(p);
        p.addEventListener('animationend', ()=> p.remove());
      }

      setTimeout(()=> layer.classList.remove('show'), 2800);
    }
  </script>
</body>
</html>
